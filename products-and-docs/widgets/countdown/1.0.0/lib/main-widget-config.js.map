{"version":3,"file":"./products-and-docs/widgets/countdown/1.0.0/lib/main-widget-config.js","sources":["webpack:///webpack/bootstrap ddda52444702030814ee","webpack:///products-and-docs/widgets/countdown/1.0.0/src/main-widget-config.es6"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ddda52444702030814ee","($ => {\n\n  const DEFAULT_API_KEY = apiKeyService.getApiWidgetsKey();\n\n  let widget = widgetsLib.widgetsCountdown[0];\n  var themeConfig = {\n    simple_countdown: {\n        sizes: {\n          s: {\n            width: 180,\n            height: 150,\n            layout: 'horizontal'\n          },\n          m: {\n            width: 300,\n            height: 250,\n            layout: 'vertical'\n          },\n          l: {\n            width: 160,\n            height: 600,\n            layout: 'horizontal'\n          },\n          xl: {\n            width: 728,\n            height: 90,\n            layout: 'horizontal'\n          },\n          xxl: {\n            width: 300,\n            height: 600,\n            layout: 'vertical'\n          },\n          custom: {\n            width: 350,\n            height: 600,\n            layout: 'vertical'\n          },\n          fullwidth: {\n            width: '100%',\n            height: 700,\n            layout: ''\n          }\n        },\n        initSliderSize: {\n          width: 350,\n          height: 600,\n          maxWidth: 500,\n          minWidth: 350\n        }\n      }\n  };\n\n  /*\n  var $widthController = $('#w-width').slider({\n      tooltip: 'always',\n      handle: 'square'\n    }),\n    $borderRadiusController = $('#w-borderradius').slider({\n      tooltip: 'always',\n      handle: 'square'\n    }),\n  */\n  var  $getCodeButton = $('.js_get_widget_code'),\n    widgetNode = document.querySelector(\"div[w-tmapikey]\"),\n    $tabButtons = $('.js-tab-buttons'),\n    $layoutBox = $('#js-layout-box'),\n    $configForm = $(\".main-widget-config-form\"),\n    $widgetModal = $('#js_widget_modal'),\n    $widgetModalNoCode = $('#js_widget_modal_no_code');\n\n  //variables for fixed widget\n  var $window = $(window),\n      $containerWidget = $(\".widget-container-wrapper\"),\n      $configBlock = $(\".config-block\"),\n      window_min = 0,\n      window_max = 0,\n      desktopWidth = 1200,\n      threshold_offset = 50;\n  /*\n   set the container's maximum and minimum limits as well as movement thresholds\n   */\n  function setLimits(){\n    //max and min container movements\n    var topCss = ($containerWidget.css(\"top\")>0) ? parseInt($containerWidget.css(\"top\")) : 0;\n    var headerOffset = $('.top-bar').height() + /*padding of top-bar*/8 + /*bottom-margin*/10;\n    var max_move = $configBlock.offset().top + $configBlock.height() - $containerWidget.height() - topCss - headerOffset;\n    var min_move = $configBlock.offset().top - headerOffset;\n\n    $containerWidget\n      .data('min', min_move)\n      .data('max',max_move);\n\n    //window thresholds so the movement isn't called when its not needed!\n    window_min = min_move - threshold_offset;\n    window_max = max_move + $containerWidget.height() + threshold_offset;\n  }\n\n  /*\n   widget container scroll handler\n   */\n  function windowScroll(){\n    let innerWidth = window.innerWidth;\n    let j = 0;\n    function updateScroll() {\n      //if the window is within the threshold, begin movements\n      if ($window.scrollTop() >= window_min && $window.scrollTop() < window_max) {\n        if ($containerWidget.height() < $configBlock.height() && innerWidth >= desktopWidth) {\n          //reset the limits (optional)\n          setLimits();\n          //move the container\n          containerMove();\n        }\n      }\n      j++;\n    }\n    if(j === 0) updateScroll();\n\n    setTimeout(() => {\n      if (innerWidth < desktopWidth && $containerWidget.height() > $configBlock.height()) {\n        containerMove_clearOffset();\n        updateScroll();\n      }\n      if($containerWidget.height() < $configBlock.height() || innerWidth >= desktopWidth) {\n        if( innerWidth < desktopWidth ){\n          containerMove_clearOffset();\n        }\n        updateScroll();\n      }\n    }, 200);    \n\n  }\n\n  $window.on(\"scroll resize\", windowScroll);\n\n  /**\n   * Clear top offset of widget container\n   */\n  function containerMove_clearOffset(){\n    $containerWidget.css(\"margin-top\", 0);\n  }\n  /**\n   * Handles moving the container if needed.\n   **/\n  function containerMove(){\n    let marginTop = 0;\n    const wst = $window.scrollTop(),\n      {min, max} = $containerWidget.data();\n\n    //if the window scroll is within the min and max (the container will be 'sticky';\n    if( wst >= min && wst <= max ){\n      //if the window scroll is below the minimum move it down!\n      marginTop = wst - min;\n    }else if( wst > max ){\n      marginTop = max - min;\n    }\n    $containerWidget.css('marginTop', (marginTop > 0 ? marginTop : 0));\n  }\n\n  /**\n   * Toggle 'width slider' and width\n   * @param targetValue(string) -\n   * @param widgetNode(object) - current widget\n   */\n  var fullWidth = function(targetValue , widgetNode){\n    let widthSlider = $('.js_widget_width_slider'),\n        widgetContainerWrapper = $containerWidget,\n        widgetContainer = $(\".widget-container\", widgetContainerWrapper),\n        $border_slider = $('.js_widget_border_slider');\n\n    if(targetValue === 'fullwidth'){\n      widthSlider.slideUp(\"fast\");\n      // $borderRadiusController.slider('setValue', 0);\n      widgetNode.setAttribute('w-borderradius', 0);\n      widgetContainerWrapper.css({width: \"100%\"});\n      widgetContainer.css({ width: '100%' });\n      // widgetNode.setAttribute('w-height', 700);\n    }else {\n      $border_slider.slideDown(\"fast\");\n      // $borderRadiusController.slider('setValue', 4);\n      widgetNode.setAttribute('w-borderradius', 4);\n      widgetContainerWrapper.css({ width: 'auto' });\n      widgetContainer.css({ width: 'auto' });\n      if(targetValue === 'custom'){widthSlider.slideDown(\"fast\");}\n      //resetWidget($configForm );\n    }\n  };\n\n  var changeState = function(event){\n    if(!event.target.name){return;}\n    const targetValue = event.target.value,\n          targetName = event.target.name;\n\n    if(targetName === \"w-layout\"){\n      let sizeConfig = themeConfig.simple_countdown.initSliderSize;\n\n      if(targetValue === 'horizontal'){\n        sizeConfig = {\n          width: 620,\n          height: 252,\n          maxWidth: 900,\n          minWidth: 620\n        };\n      }\n\n      /*\n      $widthController.slider({\n          setValue: sizeConfig.width ,\n          max: sizeConfig.maxWidth,\n          min: sizeConfig.minWidth\n        })\n        .slider('refresh');\n      */\n\n      widgetNode.setAttribute('w-width', sizeConfig.width);\n      widgetNode.setAttribute('w-height', sizeConfig.height);\n    }\n\n    //Check fixed sizes for 'simple_countdown' theme\n    if(targetName === \"w-proportion\") {\n      let widthSlider = $('.js_widget_width_slider'); //if init it on top -> then see bug on Vertical/Horizontal layout change\n      let sizeConfig = {\n        width: themeConfig.simple_countdown.sizes[targetValue].width,\n        height: themeConfig.simple_countdown.sizes[targetValue].height,\n        maxWidth: 600,\n        minWidth: 350\n      };\n\n      fullWidth(targetValue, widgetNode);\n\n      //set layout\n      widgetNode.setAttribute('w-layout', themeConfig.simple_countdown.sizes[targetValue].layout);\n\n      if (targetValue !== 'custom') {\n        $tabButtons.slideUp(\"fast\");\n        widthSlider.slideUp(\"fast\");\n      }else{\n        $tabButtons.slideDown(\"fast\");\n        widthSlider.slideDown(\"fast\");\n        $('input:radio[name=\"w-layout\"][value=\"vertical\"]',$tabButtons).prop('checked', true);\n\n        sizeConfig = { //default size\n          width: themeConfig.simple_countdown.initSliderSize.width,  //350\n          height: themeConfig.simple_countdown.initSliderSize.height,  //600\n          maxWidth: themeConfig.simple_countdown.initSliderSize.maxWidth,  //500\n          minWidth: themeConfig.simple_countdown.initSliderSize.minWidth // 350\n        };\n        /*\n        $widthController.slider({\n            setValue: sizeConfig.width,\n            max: sizeConfig.maxWidth,\n            min: sizeConfig.minWidth\n          })\n          .slider('refresh');\n        */\n      }\n\n      widgetNode.setAttribute('w-width', sizeConfig.width);\n      widgetNode.setAttribute('w-height', sizeConfig.height);\n    }\n\n    widgetNode.setAttribute(event.target.name, event.target.value); //set attr in widget\n\n\n    widget.update();\n\n    windowScroll();//recalculate widget container position\n  };\n\n  var resetWidget = function(configForm , excludeOption) {\n    let widthSlider = $('.js_widget_width_slider'),\n        widgetContainerWrapper = $('.widget-container-wrapper'),\n        height = 600,\n        theme,\n        layout,\n        $border_slider = $('.js_widget_border_slider');\n        $tabButtons = $('.js-tab-buttons');\n\n    widgetContainerWrapper.removeAttr('style');\n\n    configForm.find(\"input[type='text']\").each(function(){\n      let $self = $(this),\n          data = $self.data(),\n          value = data.userAPIkey || data.defaultValue || '';\n      \n      if(data.sliderValue){\n        value = data.sliderValue;\n        $self.slider({\n          setValue: value,\n          max: data.sliderMax,\n          min: data.sliderMin\n        })\n        .slider('refresh');\n      }else{\n        $self.val(value);\n      }\n\n      widgetNode.setAttribute($self.attr('name'), value);\n    });\n\n    configForm.find(\"input[type='radio']\").each(function(){\n      var $self = $(this);\n      if($self.data('is-checked')){\n        let name = $self.attr('name'),\n            val = $self.val();\n        if(name === 'w-theme'){\n          theme = val;\n        }else if(name === 'w-layout'){\n          layout = val;\n        }else if(name === 'w-proportion'){\n          $layoutBox.slideDown(\"fast\");\n          $border_slider.slideDown(\"fast\");\n          // $borderRadiusController.slider('setValue', 4);\n          $tabButtons.slideDown(\"fast\");\n          widthSlider.slideDown(\"fast\");\n          // $widthController.slider('refresh');\n        }\n        $self.prop('checked', true);\n        widgetNode.setAttribute($self.attr('name'), val);\n      }\n    });\n\n    if(typeof excludeOption !== 'undefined' && typeof excludeOption.id !== 'undefined'){\n      widgetNode.setAttribute('w-id', excludeOption.id); //set val in widget\n        $('#w-id').val(excludeOption.id);//set val in cofigurator\n    }    \n    $layoutBox.slideDown(\"fast\");\n    $border_slider.slideDown(\"fast\");\n    // $borderRadiusController.slider('setValue', 4);\n    // $widthController.slider('refresh');\n    $tabButtons.slideDown(\"fast\");\n    widthSlider.slideDown(\"fast\");\n\n    if(layout === 'horizontal'){\n      //height = getHeightByTheme(theme);\n      height = 252;\n    }\n    widgetNode.setAttribute('w-height', height);\n\n    // toggleDisabled(widgetNode);//set disabled btn if input is empty\n\n    widget.update();\n  };\n\n  var init = function (){\n    //sets the limits for the first load\n    setLimits();\n\n    //do one container move on load\n    containerMove();\n\n    // Set min widget size on mobile devices\n    if(parseInt($(window).width(), 10) < 767){\n      $('#w-fixed-300x250').trigger('click');\n    }\n  };\n\n  /**\n   * Events\n   */\n  function addEvents() {\n\n    $configForm.on(\"change\", changeState);\n    // Mobile devices. Force 'change' by 'Go' press\n\n    $configForm.on(\"submit\", function (e) {\n      $configForm.find('input:focus').trigger('blur');\n      e.preventDefault();\n    });\n\n    /*set tooltip value above slider*/\n    $configForm.find(\"input[type='text']\").each(function () {\n      var $self = $(this);\n      $self.data('default-value', $self.val());\n    });\n\n    $configForm.find(\"input[type='radio']\").each(function () {\n      var $self = $(this);\n      if ($self.is(':checked'))\n        $self.data('is-checked', 'checked');\n    });\n\n    $getCodeButton.on('click', function () {\n      var codeCont = document.querySelector(\".language-html.widget_dialog__code\");\n\n      var htmlCode = document.createElement(\"div\");\n      for (var key in widget.config) {\n        htmlCode.setAttribute(\"w-\" + key, widget.config[key]);\n      }\n      var tmp = document.createElement(\"div\");\n      tmp.appendChild(htmlCode);\n      codeCont.textContent = tmp.innerHTML;\n      $widgetModal.modal();\n    });\n\n    $('.js_reset_widget').on('click', function () {\n      resetWidget($configForm);\n    });\n\n    $('#js_widget_modal__close').on('click', function () {\n      $widgetModal.modal('hide');\n    });\n\n    $('#js_widget_modal_no_code__close').on('click', function () {\n      $widgetModalNoCode.modal('hide');\n    });\n\n    $('#js_styling_nav_tab').on('shown.bs.tab', function (e) {\n      /* $widthController.slider('relayout'); */\n      /* $borderRadiusController.slider('relayout'); */\n      windowScroll();//recalculate widget container position\n    });\n\n    document.getElementById('w-width').addEventListener('blur', function(e) {\n      if(this.value < 350 || this.value > 1920) {\n        this.value = 350;\n        let widgetNode = document.querySelector(\"div[w-tmapikey]\");\n        widgetNode.setAttribute('w-width', '350');\n        document.querySelector('.events-root-container').style.width = '350px';\n          widget.update();\n      }\n    });\n\n    document.getElementById('w-borderradius').addEventListener('blur', function(e) {\n        if(this.value < 0 || this.value > 50) {\n            this.value = 4;\n            let widgetNode = document.querySelector(\"div[w-tmapikey]\");\n            widgetNode.setAttribute('w-borderradius', '4');\n            widget.update();\n        }\n    });\n\n  }\n\n  addEvents();\n\n  init();\n\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// products-and-docs/widgets/countdown/1.0.0/src/main-widget-config.es6"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;A;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AA/BA;AAqCA;AACA;AACA;AACA;AACA;AAJA;AAtCA;AADA;AACA;AA+CA;;;;;;;;;;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;;;A","sourceRoot":""}