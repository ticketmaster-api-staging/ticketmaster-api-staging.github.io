{"version":3,"sources":["../src/main-widget.es6"],"names":[],"mappings":"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","file":"main-widget.js","sourcesContent":["/*\n {\"ak\":\"KRUnjq8y8Sg5eDpP90dNzOK70d4WiUst\",\"kw\":\"zz top\",\"t\":{\"n\":\"t1\",\"b\":true,\"h\":200,\"w\":150,\"br\":4}}\n {\n \"ak\":\"KRUnjq8y8Sg5eDpP90dNzOK70d4WiUst\", #ApiKey\n \"kw\":\"zztop\", #KeyWords\n \"t\":{ #Theme\n \"b\":\"t1\", #baseTheme - if null do not load theme\n \"h\":300,\n \"w\":150\n }\n })\n\n -API key       # input\n -Key word      # input\n -Postal Code   # input\n -Theme         # Buttons\n -Color Scheme  # Buttons\n -Layout        # Buttons\n -Height        # Slider\n -Width         # Slider\n -Border Radius # Slider\n\n */\n\n\n\nclass TicketmasterWidget {\n\n  set config(config) { this.widgetConfig = this.decConfig(config); }\n  get config() { return this.widgetConfig; }\n  set events(responce){ this.eventsList = this.parseEvents(responce);}\n  get events(){ return this.eventsList;}\n  get apiUrl(){ return \"https://app.ticketmaster.com/discovery/v1/events.json\"; }\n  get themeUrl() { return \"http://ticketmaster-api-staging.github.io/widgets/main/theme/\"; }\n  get logoUrl() { return \"http://developer.ticketmaster.com/\"; }\n\n  //https://app.ticketmaster.com/discovery/v1/events/10004F84CD1C5395/images.json?apikey=KRUnjq8y8Sg5eDpP90dNzOK70d4WiUst\n\n  constructor(selector) {\n    this.sliderSpeed = 5000;\n    this.widgetRoot = document.querySelectorAll(selector)[0];\n    this.eventsRoot = document.createElement(\"ul\");\n    this.eventsRoot.classList.add(\"events-root\");\n    this.widgetRoot.appendChild(this.eventsRoot);\n\n    this.config = this.loadConfig();\n\n    if(this.config.t.n !== null){\n      this.makeRequest( this.styleLoadingHandler, this.themeUrl + this.config.t.n + \".css\" );\n    }\n\n    this.widgetRoot.classList.remove(\"border\");\n    if(this.config.t.b){\n      this.widgetRoot.classList.add(\"border\");\n    }\n\n    this.widgetRoot.style.height = `${this.config.t.h}px`;\n    this.widgetRoot.style.width  = `${this.config.t.w}px`;\n    this.widgetRoot.style.borderRadius =  `${this.config.t.br}px`;\n\n    this.makeRequest( this.eventsLoadingHandler, this.apiUrl, {apikey: this.config.ak, keyword: this.config.kw} );\n    this.eventProcessed = 0;\n    this.addWidgetRootLinks();\n  }\n\n  addWidgetRootLinks(){\n    var legalNoticeContent = document.createTextNode('Legal Notice'),\n        legalNotice = document.createElement(\"div\");\n    legalNotice.classList.add(\"legal-notice\");\n    legalNotice.appendChild(legalNoticeContent);\n\n    var logo = document.createElement('a');\n    logo.classList.add(\"event-logo\");\n    logo.target = '_blank';\n    logo.href = this.logoUrl;\n\n    this.widgetRoot.appendChild(legalNotice);\n    this.widgetRoot.appendChild(logo);\n  }\n\n  initSlider(){\n    if(this.sliderInterval) clearInterval(this.sliderInterval);\n    var eventCount = this.eventsRoot.getElementsByClassName(\"event-wrapper\").length;\n    this.eventsRoot.style.marginLeft = '0%';\n    this.eventsRoot.style.width = `${eventCount * 100}%`;\n    if(eventCount > 1){\n      var currentEvent = 1;\n      this.sliderInterval = setInterval(()=> {\n        this.eventsRoot.style.marginLeft = `-${currentEvent * 100}%`;\n        if(eventCount - 1 > currentEvent){\n          currentEvent ++;\n        }else{\n          currentEvent = 0;\n        }\n      }, this.sliderSpeed);\n    }\n  }\n\n  clear(){\n    this.eventsRoot.innerHTML = \"\";\n  }\n\n  update() {\n\n    let oldTheme = {\n      keywods: this.config.kw,\n      theme: this.config.t.b\n    };\n\n    this.config = this.loadConfig();\n\n    this.eventProcessed = 0;\n\n    /*if(this.config.t.b !== null){\n      this.makeRequest( this.styleLoadingHandler, this.themeUrl + this.config.t.b + \".css\" );\n    }*/\n\n    this.widgetRoot.style.height = `${this.config.t.h}px`;\n    this.widgetRoot.style.width  = `${this.config.t.w}px`;\n    this.widgetRoot.style.borderRadius =  `${this.config.t.br}px`;\n\n    this.widgetRoot.classList.remove(\"border\");\n    if(this.config.t.b ){\n      this.widgetRoot.classList.add(\"border\");\n    }\n\n    if(oldTheme.keywods !== this.config.kw){\n      this.clear();\n      this.makeRequest( this.eventsLoadingHandler, this.apiUrl, {apikey: this.config.ak, keyword: this.config.kw} );\n    }\n    else{\n      var events = document.getElementsByClassName(\"event-wrapper\");\n      for(event in events){\n        if(events.hasOwnProperty(event) && events[event].style !== undefined){\n          events[event].style.width = `${this.config.t.w}px`;\n          events[event].style.height = `${this.config.t.h}px`;\n        }\n      }\n    }\n  }\n\n\n  loadConfig(){\n    return this.widgetRoot.dataset.config ? this.widgetRoot.dataset.config : null;\n  }\n\n  styleLoadingHandler(){\n    if (this && this.readyState == XMLHttpRequest.DONE ) {\n      if(this.status == 200){\n        var style = document.createElement(\"style\");\n        style.setAttribute(\"type\",\"text/css\");\n        style.textContent = this.responseText;\n        document.getElementsByTagName(\"head\")[0].appendChild(style);\n      }\n      else {\n        alert(\"theme wasn't loaded\")\n      }\n    }\n  }\n\n  eventsLoadingHandler(){\n    if (this && this.readyState == XMLHttpRequest.DONE ) {\n      if(this.status == 200){\n        this.widget.events = JSON.parse(this.responseText);\n        //this.widget.build();\n        this.widget.loadImages();\n      }\n      else if(this.status == 400) {\n        alert('There was an error 400')\n      }\n      else {\n        alert('something else other than 200 was returned')\n      }\n    }\n  }\n\n\n  loadImages(){\n    var self = this;\n    this.events.forEach(function(event){\n      var url = self.makeImageUrl(event.id);\n      self.makeRequest(self.loadImagesHandler ,url, {apikey: self.config.ak});\n    })\n  }\n\n  loadImagesHandler(){\n    if (this && this.readyState == XMLHttpRequest.DONE ) {\n      if(this.status == 200){\n        let response = JSON.parse(this.responseText);\n        let event = this.widget.getEventByID(response.id);\n        event.img = this.widget.getImageForEvent(response.images);\n        this.widget.publishEvent(event);\n      }\n      else {\n        console.error('Fail to load IMG for event');\n      }\n      this.widget.eventProcessed ++;\n    }\n  }\n\n  publishEvent(event){\n    let DOMElement = this.createDOMItem(event);\n    this.eventsRoot.appendChild(DOMElement);\n    if(this.eventProcessed === this.events.length - 1){\n      this.initSlider();\n    }\n  }\n\n  getEventByID(id){\n    for(let index in this.events){\n      if(this.events.hasOwnProperty(index) && this.events[index].id === id){\n        return this.events[index]\n      }\n    }\n  }\n\n  getImageForEvent(images){\n    var width = this.config.t.w,\n      height = this.config.t.h;\n\n    images.sort(function(a,b) {\n      if (a.width < b.width)\n        return -1;\n      else if (a.width > b.width)\n        return 1;\n      else\n        return 0;\n    });\n\n    var myImg = \"\";\n    images.forEach(function(element){\n      if(element.width >= width && element.height >= height && !myImg){\n        myImg = element.url;\n      }\n    });\n    return myImg;\n  }\n\n  parseEvents(eventsSet){\n    if(!eventsSet._embedded){\n      if(typeof($widgetModalNoCode) !== \"undefined\"){\n        $widgetModalNoCode.modal();\n      }\n      return [];\n    }\n    eventsSet = eventsSet._embedded.events;\n    var tmpEventSet = [];\n    for(var key in eventsSet){\n      if(eventsSet.hasOwnProperty(key)){\n        let currentEvent = {};\n        currentEvent.id = eventsSet[key].id;\n        currentEvent.url = eventsSet[key].eventUrl ? eventsSet[key].eventUrl : \"\";\n        currentEvent.name = eventsSet[key].name;\n        currentEvent.date = {\n          day: eventsSet[key].dates.start.localDate,\n          time: eventsSet[key].dates.start.localTime\n        };\n\n        currentEvent.address = eventsSet[key]._embedded.venue[0].address;\n\n        currentEvent.categories = [];\n        if(eventsSet[key]._embedded.hasOwnProperty('categories')){\n          let eventCategories = eventsSet[key]._embedded.categories;\n          currentEvent.categories = Object.keys(eventCategories).map(function(category){\n            return eventCategories[category].name\n          });\n        }\n        tmpEventSet.push(currentEvent);\n      }\n    }\n    return tmpEventSet;\n  }\n\n\n  makeRequest(handler, url=this.apiUrl, attrs={}, method=\"GET\"){\n    attrs = Object.keys(attrs).map(function(key){\n      return `${key}=${attrs[key]}`;\n    }).join(\"&\");\n\n    url = [url,attrs].join(\"?\");\n\n    this.xmlHTTP = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\n    if(method == \"POST\") {\n      this.xmlHTTP.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\n    }\n    this.xmlHTTP.widget = this;\n    this.xmlHTTP.onreadystatechange = handler;\n    this.xmlHTTP.open(method, url, true);\n    this.xmlHTTP.send();\n  }\n\n  createDOMItem(itemConfig){\n    var event = document.createElement(\"li\");\n    event.classList.add(\"event-wrapper\");\n    event.style.backgroundImage = `url('${itemConfig.img}')`;\n    event.style.height = `${this.config.t.h}px`;\n    event.style.width  = `${this.config.t.w}px`;\n\n    var nameContent = document.createTextNode(itemConfig.name),\n      name =  document.createElement(\"div\");\n    name.classList.add(\"event-name\");\n    name.appendChild(nameContent);\n\n    var dateContent = document.createTextNode(itemConfig.date.day),\n    date = document.createElement(\"span\");\n    date.classList.add(\"event-date\");\n    date.appendChild(dateContent);\n\n    var timeContent = document.createTextNode(itemConfig.date.time),\n      time = document.createElement(\"span\");\n    time.classList.add(\"event-date\");\n    time.appendChild(timeContent);\n\n    var dateWraper = document.createElement(\"div\");\n    dateWraper.classList.add(\"event-date-wraper\");\n\n    dateWraper.appendChild(date);\n    dateWraper.appendChild(time);\n\n    var addressWrapper = document.createElement(\"div\");\n    addressWrapper.classList.add(\"address-wrapper\");\n\n    if(itemConfig.address.line1){\n      var addressOneText = document.createTextNode(itemConfig.address.line1),\n      addressOne =  document.createElement(\"div\");\n      addressOne.classList.add(\"event-address\");\n      addressOne.appendChild(addressOneText);\n      addressWrapper.appendChild(addressOne);\n    }\n\n    if(itemConfig.address.line2){\n      var addressTwoText = document.createTextNode(itemConfig.address.line2),\n      addressTwo =  document.createElement(\"div\");\n      addressTwo.classList.add(\"event-address\");\n      addressTwo.appendChild(addressTwoText);\n      addressWrapper.appendChild(addressTwo);\n    }\n\n    var categoriesWrapper = document.createElement(\"div\");\n    categoriesWrapper.classList.add(\"category-wrapper\");\n\n    itemConfig.categories.forEach(function(element){\n      var categoryText = document.createTextNode(element),\n        category = document.createElement(\"span\");\n        category.classList.add(\"event-category\");\n        category.appendChild(categoryText);\n        categoriesWrapper.appendChild(category);\n    });\n\n    var medWrapper = document.createElement(\"div\");\n    medWrapper.classList.add(\"event-content-wraper\");\n\n    medWrapper.appendChild(name);\n    medWrapper.appendChild(dateWraper);\n    medWrapper.appendChild(addressWrapper);\n    medWrapper.appendChild(categoriesWrapper);\n\n    event.appendChild(medWrapper);\n    return event;\n  }\n\n\n\n  makeImageUrl(id){\n    return `https://app.ticketmaster.com/discovery/v1/events/${id}/images.json`;\n  }\n\n\n  /*\n   * Config block\n   */\n\n  decConfig(config){\n    return JSON.parse(window.atob(config));\n  }\n\n  encConfig(config){\n    return window.btoa(config);\n  }\n\n\n\n}\n\nconst widget = new TicketmasterWidget(\"#ticketmaster-config\");\n"]}